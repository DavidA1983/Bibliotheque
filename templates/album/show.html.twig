{% extends 'base.html.twig' %}

{% block title %}Album{% endblock %}

{% block body %}
<main class="container my-5">

    <div class="comic-card mx-auto p-4 shadow-lg rounded-4">

        {# --- Titre façon BD --- #}
        <h1 class="text-center comic-title mb-4">
            {{ album.titre }}
        </h1>

        <div class="row align-items-start">

            {# --- Couverture à gauche sur desktop, en dessous sur mobile --- #}
            {% if album.couverture %}
            <div class="col-12 col-md-4 order-2 order-md-1 text-center mt-5 mb-4 mb-md-0 pe-md-4">
                <img src="{{ asset('uploads/' ~ album.couverture) }}"
                     alt="Couverture"
                     class="img-fluid rounded comic-border cover-zoom"
                     style="max-height: 350px;">
            </div>
            {% endif %}

            {# --- Infos + bulles + boutons --- #}
            <div class="col-12 col-md-8 order-1 order-md-2">

                <div class="comic-bubble mb-3">
                    <strong class="text-dark">Titre :</strong> {{ album.titre }}
                </div>

                <div class="comic-bubble mb-3">
                    <strong class="text-dark">Numéro :</strong> {{ album.numero }}
                </div>

                <div class="comic-bubble mb-3">
                    <strong class="text-dark">Série :</strong> {{ album.serie.nom }}
                </div>

<div class="comic-bubble mb-3 d-flex flex-column flex-md-row justify-content-between align-items-md-center gap-2">

    <div>
        <strong>Statut :</strong>
        {% if album.lu %}
            ✔️ <span class="text-success fw-bold">Lu</span>
        {% else %}
            ❌ <span class="text-danger fw-bold">Non lu</span>
        {% endif %}
    </div>

    <form method="post" action="{{ path('app_album_toggle_lu', {'id': album.id}) }}" class="m-0">
        <input type="hidden" name="_token" value="{{ csrf_token('toggle_lu' ~ album.id) }}">
        <button class="comic-action-btn py-1 px-3">
            {% if album.lu %}Changer le statut{% else %}Changer le statut{% endif %}
        </button>
    </form>

</div>


                {# --- Boutons action --- #}
                <div class="d-flex gap-2 flex-wrap mb-3">
                    <a href="{{ path('app_album_edit', {'id': album.id}) }}" class="comic-action-btn">
                        Modifier
                    </a>
                    <a href="{{ path('app_serie_show', { id: album.serie.id }) }}" class="comic-action-btn">
                        Retour
                    </a>
                </div>

 

            </div>
        </div>
    </div>

</main>

{% endblock %}
